---
id: 001
title: Create Phase 2 Constitution
stage: constitution
date: 2026-01-02
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: main
user: OsamabinAdnan
command: /sp.constitution
labels: ["constitution", "phase2", "setup", "architecture"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
tests:
  - none
---

## Prompt

Extract and document all Phase 2 requirements from PDF then just create constitution on the basis of document and given detail

User provided detailed requirements:

**Project:** Hackathon II Phase II: Todo Full-Stack Web Application

**Description:** A multi-user full-stack Todo web application built using strict spec-driven development with Claude Code and Spec-Kit Plus. Evolves the Phase I console app into a persistent, authenticated, responsive web app implementing Basic, Intermediate, and Advanced Todo features.

**Core principles:**
- **Strict Spec-Driven Development** ‚Äî Every feature, component, API endpoint, and database change must begin with a detailed Markdown specification. Refine specs iteratively until Claude Code generates correct, complete implementation.
- **Use subagents and skills** - Use subagents and skills according to the working and subagent and skills domains.
- **No Manual Coding Allowed** ‚Äî All code (frontend, backend, config) must be generated by Claude Code. Manual edits are prohibited; fix issues by improving specs and re-generating.
- **AI as Architect** ‚Äî The developer acts as system architect: write/refine specs, plans, and prompts; Claude Code handles syntax and boilerplate.
- **User Data Isolation & Security** ‚Äî Multi-user support with strict ownership enforcement; no user can access or modify another's tasks.
- **Modular & Future-Ready Design** ‚Äî Build with clean separation for easy evolution into Phases III‚ÄìV (AI chatbot, Kubernetes, event-driven).
- **Context7 MCP Server** - When you use any tech, you have to read documentation of that tech using context7 MCP server.

**Key standards:**
- **Technology Stack**
  - Frontend: Next.js 16+ (App Router), TypeScript, Tailwind CSS (no inline styles), GSAP and Framer Motion for animations
    - Make modern and aesthetic design, try to `JetBrains Mono` and `Inter` fonts in order to give it modern look, give glassmorphism (backdrop-blur) effect
    - Use shadcn/ui for ready made components
  - Backend: UV package manager, Python 3.13+, FastAPI
  - ORM: SQLModel
  - Database: Neon Serverless PostgreSQL
  - Authentication: Better Auth with JWT tokens (shared secret via `BETTER_AUTH_SECRET`)
  - Spec-Driven Tools: Claude Code + Spec-Kit Plus
- **API Endpoints** (all under `/api/{user_id}/`)
  - GET `/api/{user_id}/tasks` ‚Üí List user's tasks
  - POST `/api/{user_id}/tasks` ‚Üí Create new task
  - GET `/api/{user_id}/tasks/{id}` ‚Üí Get task details
  - PUT `/api/{user_id}/tasks/{id}` ‚Üí Update task
  - DELETE `/api/{user_id}/tasks/{id}` ‚Üí Delete task
  - PATCH `/api/{user_id}tasks/{id}/complete` ‚Üí Toggle completion
- **Feature Implementation** ‚Äî All three levels:
  - Basic: Add, Delete, Update, View, Mark Complete
  - Intermediate: Priorities & Tags/Categories, Search & Filter, Sort Tasks
  - Advanced: Recurring Tasks, Due Dates & Time Reminders (with browser notifications), Recurring task should regenerate once due data pass or user marked it as completed
- **Monorepo Structure** ‚Äî Strictly follow Spec-Kit organization with `.spec-kit/config.yaml`, organized `/specs/` subfolders, root/frontend/backend `CLAUDE.md` files. Root, frontend and backend should have seperate Claude.md files.
- **Authentication & Security**
  - JWT-based stateless auth. Better Auth can be configured to issue JWT (JSON Web Token) tokens when users log in. These tokens are self-contained credentials that include user information and can be verified by any service that knows the secret key.
  - All requests require valid `Authorization: Bearer <token>` header
  - Backend middleware verifies JWT and enforces user_id matching
  - Unauthorized/invalid requests ‚Üí 401 Unauthorized
  - Token expiry (e.g., 7 days)

**Constraints:**
- No manual code writing or editing ‚Äî only spec refinement and Claude Code generation.
- Use Agentic Dev Stack workflow: spec ‚Üí plan ‚Üí tasks ‚Üí generate ‚Üí test ‚Üí iterate.
- Windows users must develop in WSL 2.
- Local development via docker-compose or separate dev servers.
- Will deploy on vercel or github pages

**Success criteria:**
- Fully working multi-user web app with all Basic, Intermediate, and Advanced features.
- Complete, organized specs folder showing refinement history.
- Secure authentication: verified user isolation, JWT enforcement, no cross-user data leaks.
- Responsive UI with animations, persistent storage in Neon DB.
- Live deployment on Vercel or github (frontend) + backend API on hugging face.
- Clear evidence of spec-driven process (prompts, iterations) for judging.
- Ready for progression to Phase III (AI chatbot integration).

## Response snapshot

I created a comprehensive Phase 2 Constitution document that establishes strict guidelines for the multi-user full-stack Todo web application development. The constitution includes:

**7 Core Principles:**
1. Strict Spec-Driven Development (NON-NEGOTIABLE) - All features must begin with approved specifications
2. No Manual Coding Allowed (NON-NEGOTIABLE) - Claude Code generates ALL implementation
3. Use Subagents and Skills - Leverage specialized agents (Explore, Plan, Task)
4. Context7 MCP Server for Documentation - Mandatory documentation lookup before using any technology
5. User Data Isolation & Security (CRITICAL) - Absolute user isolation with JWT authentication
6. Modular & Future-Ready Design - Clean architecture for Phase III-V progression
7. Design Excellence - Modern UI with glassmorphism, animations, premium typography

**Technology Stack Defined:**
- Frontend: Next.js 15+ (App Router), TypeScript, Tailwind CSS, shadcn/ui, GSAP/Framer Motion
- Backend: Python 3.13+, FastAPI, SQLModel, UV package manager
- Database: Neon Serverless PostgreSQL
- Auth: Better Auth with JWT tokens
- Deployment: Vercel (frontend) + Hugging Face (backend)

**Comprehensive Sections:**
- API Design Standards (6 required endpoints with user-scoped URLs)
- Feature Implementation Levels (Basic CRUD, Intermediate, Advanced)
- Monorepo Structure (detailed folder layout)
- Authentication & Security Standards (JWT implementation, user isolation tests)
- Code Quality Standards (TypeScript strict mode, Python type hints)
- Development Workflow (Spec-Driven Iteration Cycle)
- PHR & ADR requirements
- Constraints (prohibited/required actions)
- Success Criteria (functional, security, documentation, deployment)
- Governance & Amendment Process

The constitution is saved at `.specify/memory/constitution.md` and serves as the authoritative reference for all Phase 2 development.

## Outcome

- ‚úÖ Impact: Established complete architectural foundation and development principles for Phase 2 full-stack Todo application
- üß™ Tests: No tests (documentation artifact)
- üìÅ Files: Created `.specify/memory/constitution.md` (382 lines)
- üîÅ Next prompts: Create feature specifications using `/sp.specify` for Authentication + Basic CRUD, then proceed with `/sp.clarify ‚Üí /sp.plan ‚Üí /sp.tasks ‚Üí /sp.implement`
- üß† Reflection: The constitution successfully captures all requirements from the PDF and user specifications, establishing clear boundaries for spec-driven development with zero manual coding. Ready to proceed with feature implementation following the defined workflow.

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): N/A (constitution document)
- Prompt variant (if applicable): Initial constitution creation
- Next experiment (smallest change to try): Begin spec-driven workflow with authentication feature specification
